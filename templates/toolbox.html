<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>All‑in‑One Toolbox</title>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
</head>
<body>
  <!-- Nav tabs -->
  <ul class="nav nav-tabs">
    {% for slug,label in [
      ('image_generator','Image Generator'),
      ('shape_detector','Shape Detector'),
      ('oil_painting','Oil Painting'),
      ('foogle_man','Foogle Man'),
      ('paint_geometrize','Paint & Geometrize')
    ] %}
      <li class="nav-item">
        <a class="nav-link {% if active_tab==slug %}active{% endif %}"
           href="#{{slug}}" data-toggle="tab">{{label}}</a>
      </li>
    {% endfor %}
  </ul>

  <!-- Tab panes -->
  <div class="tab-content p-3">
    <div class="tab-pane fade {% if active_tab=='image_generator' %}show active{% endif %}" id="image_generator">
      <form method="POST" enctype="multipart/form-data">
        <input type="hidden" name="tool" value="image_generator">
        {% include "image_generator.html" with context %}
      </form>
    </div>

    <div class="tab-pane fade {% if active_tab=='shape_detector' %}show active{% endif %}" id="shape_detector">
      <form method="POST" enctype="multipart/form-data">
        <input type="hidden" name="tool" value="shape_detector">
        {% include "shape_detector.html" with context %}
      </form>
    </div>

    <div class="tab-pane fade {% if active_tab=='oil_painting' %}show active{% endif %}" id="oil_painting">
      <form method="POST" enctype="multipart/form-data">
        <input type="hidden" name="tool" value="oil_painting">
        {% include "oil_painting.html" with context %}
      </form>
    </div>

    <div class="tab-pane fade {% if active_tab=='foogle_man' %}show active{% endif %}" id="foogle_man">
      <form method="POST" enctype="multipart/form-data">
        <input type="hidden" name="tool" value="foogle_man">
        {% include "foogle_man_repo.html" with context %}
      </form>
    </div>

    <div class="tab-pane fade {% if active_tab=='paint_geometrize' %}show active{% endif %}" id="paint_geometrize">
      <form method="POST" enctype="multipart/form-data">
        <input type="hidden" name="tool" value="paint_geometrize">
        {% include "paint_geometrize.html" with context %}
      </form>
    </div>
  </div>

  <!-- JS -->
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    // persist tab via URL
    $('a[data-toggle="tab"]').on('show.bs.tab', function (e) {
      history.replaceState(null, '', '?tool=' + e.target.getAttribute('href').substring(1));
    });
  </script>
</body>
</html>
